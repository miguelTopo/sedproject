<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:pe="http://primefaces.org/ui/extensions"
	xmlns:p="http://primefaces.org/ui">
<f:view>
	<h:head>
		<link rel="stylesheet" type="text/css" href="../css/sedStyle.css" />
		<f:loadBundle basename="co.edu.udistrital.core.common.util.resource.webMessages" var="bundle" />
	</h:head>
	<h:body>
		<h:form id="forgetPasswordForm">
			<p:growl id="growl" showDetail="true" life="6000" autoUpdate="true" globalOnly="true" />
			<p:dialog id="dlgGeneralStatus" widgetVar="statusDialog" closable="false" header="Procesando..." resizable="false"
				draggable="false" modal="true">
				<div align="center">
					<p:graphicImage value="../css/images/loadingAjax.gif" />
				</div>
			</p:dialog>
			<div id="sedHeader" align="center">
				<table>
					<tr>
						<td>
							<p:graphicImage value="../css/images/bogotaShield.png" height="85" width="70" />
						</td>
						<td>
							<p:graphicImage value="../css/images/logoSed.png" />
						</td>
					</tr>
				</table>
			</div>
			<br/>
			<br/>
			<br/>
			<table style="border-spacing:10px;width:100%;">
				<tr>
					<td style="width:40%"/>
					<td style="width:20%"/>
					<td style="width:40%"/>
				</tr>
				<tr>
					<td/>
					<td style="background: #5B92CE; border-radius: 5px 5px 5px 5px; text-align: center">
						<h4 style="color: white;">
							Restablecer Contraseña
						</h4>
					</td>
				</tr>
				<tr>
					<td/>
					<td style="text-align:center">
						<p:graphicImage value="../css/icon/recoverPassword.png" width="55" height="55"/>
					</td>
				</tr>
				<tr>
					<td/>
					<td style="text-align:center">
						Ingrese su correo electrónico:
					</td>
				</tr>
				<tr>
					<td/>
					<td style="text-align:center">
						<p:inputText id="txtSedUserEmail" value="#{passwordRecoverBean.userEmail}" style="width:90%;">
							<p:ajax process="@this" update=":forgetPasswordForm:opPassEmailExist :forgetPasswordForm:opInvalidEmail" 
								listener="#{passwordRecoverBean.validEmail}"/>
						</p:inputText>
						
						<p:outputPanel id="opPassEmailExist">
							<p:outputPanel rendered="#{!passwordRecoverBean.exitUserEmail}">
								<h:outputText value="#{bundle['page.login.labelNotEmail']}" styleClass="ui-field-invalid" />
							</p:outputPanel>
						</p:outputPanel>
						
						<p:outputPanel id="opInvalidEmail">
							<p:outputPanel rendered="#{passwordRecoverBean.invalidEmail}">
								<h:outputText value="#{bundle['page.login.labelInvalidEmail']}" styleClass="ui-field-invalid" />
							</p:outputPanel>
						</p:outputPanel>
					</td>
				</tr>
				<tr>
					<td/>
					<td>
					Aqui podemos implementar captcha si se sube el proyecto a un servidor
					</td>
				</tr>
			</table>
			<div style="text-align:center;">
				<p:commandButton value="#{bundle['page.core.labelSend']}" action="#{passwordRecoverBean.recoverPassword}" 
					onstart="statusDialog.show();" oncomplete="statusDialog.hide();" styleClass="ui-priority-primary" 
					update=":forgetPasswordForm:txtSedUserEmail"/>
			</div>
			<br/>
			
			<div align="center">
				<p:commandButton value="#{bundle['page.core.labelGoBack']}" onclick="window.open('login','_self');" type="button"/>
			</div>
		</h:form>
	</h:body>
</f:view>
</html>