<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui" 
	xmlns:pe="http://primefaces.org/ui/extensions">
<f:view>
	<style type="text/css">
		section article{
		width: 350px;
		display: inline-block;
		margin-left:25px; 
		margin-right:11px;
		}
		table{
			width:100%;
			border-spacing: 5px;
		}
		.ui-label-table{
			width:35%;
		}
		.ui-content-table{
			width:65%;
		}
	</style>
	<h:form id="addStudentForm">
		<p:panel header="#{bundle['page.student.labelAddStudent']}" style="width:100%;padding:20px;">
			<div style="padding:25px;">
				#{bundle['page.core.labelDataObligatory']}
			</div>
			<section>
				<article>
					<table>
						<tr>
							<td class="ui-label-table">
								<strong>
									* #{bundle['page.student.labelStudentName']}:
								</strong>			
							</td>
							<td class="ui-content-table">
								<p:inputText id="txtStdName" value="#{studentBean.student.name}" style="width:95%"/>			
							</td>
						</tr>
					</table>
				</article>
				<article>
					<table>
						<tr>
							<td class="ui-label-table">
								<strong>
									* #{bundle['page.student.labelStudentLastName']}:
								</strong>			
							</td>
							<td class="ui-content-table">
								<p:inputText id="txtStdLastname" value="#{studentBean.student.lastName}" style="width:95%"/>											
							</td>
						</tr>
					</table>
				</article>
				<article>
					<table>
						<tr>
							<td class="ui-label-table">
								<strong>
									* #{bundle['page.student.labelStudentEmail']}:
								</strong>			
							</td>
							<td class="ui-content-table">
								<p:inputText id="txtStdEmail" value="#{studentBean.student.email}" style="width:95%;text-transform:lowercase;" onkeyup="parseLowerCase('addStudentForm','txtStdEmail');">
									<p:ajax process="@this" listener="#{studentBean.validateEmail}" update=":addStudentForm:opExistEmail" event="blur"/>
								</p:inputText>
						
								<p:outputPanel id="opExistEmail">
									<p:outputPanel rendered="#{studentBean.existEmail}">
										<h:outputText value="#{bundle['page.seduser.labelExistEmail']}" styleClass="ui-invalid-field" />
									</p:outputPanel>
								</p:outputPanel>											
							</td>
						</tr>
					</table>
				</article>
				<article>
					<table>
						<tr>
							<td class="ui-label-table">
								<strong>
									* #{bundle['page.student.labelStudentBirthday']}:
								</strong> 			
							</td>
							<td class="ui-content-table">
								<p:calendar id="cStdBirthday" value="#{studentBean.studentBirthday}" locale="es" navigator="true" maxdate="new Date();" styleClass="student-calendar" pattern="MM/dd/yyyy"/>											
							</td>
						</tr>
					</table>
				</article>
				<article>
					<table>
						<tr>
							<td class="ui-label-table">
								<strong>
									* #{bundle['page.student.labelIdentificationType']}:
								</strong> 			
							</td>
							<td class="ui-content-table">
								<p:selectOneMenu id="somIdentificationType" value="#{studentBean.student.idIdentificationType}" style="width:98%">
									<f:selectItem itemLabel="#{bundle['page.core.labelSelectOne']}" itemValue="0"/>
									<f:selectItems value="#{studentBean.identificationTypeList}" var="s" itemLabel="#{s.name}" itemValue="#{s.id}"/>
								</p:selectOneMenu>
								<div id="valIdType_DIV" class="ui-invalid-field"/>											
							</td>
						</tr>
					</table>
				</article>
				<article>
					<table>
						<tr>
							<td class="ui-label-table">
								<strong>
									* #{bundle['page.student.labelStudentIdentification']}:
								</strong> 			
							</td>
							<td class="ui-content-table">
								<p:inputText id="txtDocument" value="#{studentBean.student.identification}" style="width:95%">
									<p:ajax process="@this" update=":addStudentForm:opExistDoc" listener="#{studentBean.validateIdentification}" event="blur"/>
								</p:inputText>
								<pe:keyFilter for="txtDocument" mask="pint"/>
						
								<p:outputPanel id="opExistDoc">
									<p:outputPanel rendered="#{studentBean.existDocument}">
										<h:outputText value="#{bundle['page.seduser.labelExistIdentification']}" styleClass="ui-invalid-field" />
									</p:outputPanel>
								</p:outputPanel>											
							</td>
						</tr>
					</table>
				</article>
				<article>
					<table>
						<tr>
							<td class="ui-label-table">
								<strong>
									* #{bundle['page.sed.labelGrade']}:
								</strong>			
							</td>
							<td class="ui-content-table">
								<p:selectOneMenu id="somGrade" value="#{studentBean.student.idGrade}" style="width:98%">
									<f:selectItem itemLabel="#{bundle['page.core.labelSelectOne']}" itemValue="0"/>
									<f:selectItems value="#{studentBean.gradeList}" var="g" itemLabel="#{g.name}" itemValue="#{g.id}"/>
									<p:ajax process="@this" listener="#{studentBean.handleGradeChange}" update=":addStudentForm:opCourseStudent"/>						
								</p:selectOneMenu>
								<div id="valGrade_DIV" class="ui-invalid-field"/>											
							</td>
						</tr>
					</table>
				</article>
				<article style="margin-left:36px;">
					<table>
						<tr>
							<td class="ui-label-table">
								<strong>
									* #{bundle['page.sed.labelCourse']}:
								</strong>			
							</td>
							<td class="ui-content-table">
								<p:outputPanel id="opCourseStudent">
									<p:selectOneMenu id="somCourse" value="#{studentBean.student.idCourse}" disabled="#{studentBean.student.idGrade eq 0}" style="width:98%">
										<f:selectItem itemLabel="#{bundle['page.core.labelSelectOne']}" itemValue="0"/>
										<f:selectItems value="#{studentBean.courseTmpList}" var="ct" itemLabel="#{ct.name}" itemValue="#{ct.id}"/>	
									</p:selectOneMenu>
									<div id="valCourse_DIV" class="ui-invalid-field"/>
								</p:outputPanel>											
							</td>
						</tr>
					</table>
				</article>
			</section>
			
			<br/><br/><br/>
			
			<div style="text-align:center;">
				<p:commandButton id="btnAddStudent" value="Guardar Estudiante" action="#{studentBean.saveStudent}" styleClass="ui-priority-primary"
					onclick="validateAddStudent();" type="button"/>
			</div>
			<div style="text-align: right;">
				<p:commandButton value="#{bundle['page.core.labelGoBack']}" icon="ui-icon-carat-1-w"
					action="#{studentBean.goBack}" />
			</div> 
		</p:panel>
	</h:form>
</f:view>
</html>